Pagecontroller exercise
============================

This template contains a working website but there are some things missing that you should fix. Doing so you will have an opportunity to investigate the structure and layout of the template and try to understand how its structure is, how to extend it and come to sense with if the structure is good and helpful.



Get going
----------------------------

Install the needed environment and developer tools.

```
composer install
```

Run the test suite to see that the setup is working as expected.

```
composer test
composer test-hard
```

You can run the development tools one by one.

```
composer phpcs      # Code style
composer phpcbf     # Fix code style issues found by phpcs
composer phpmd      # Mess detector
composer phppsalm   # Static code validation
composer phpstan    # Static code validation
```

Each tool has its own configuration file, its available in the root of the project.

You can clean up your installation and remove all files and directories that were installed by composer or generated by for some reason. Do it by executing the following command.

```
composer clean      # Clean all generated files, if any
composer clean-all  # Clean all, including installed files
```



The page layout
----------------------------

1. Find the file that is carrying the basic layout for the website. Inspect it and try to understand the code in it.

1. Do also find the function `render()` and see how its structured and what it does with the parameters it takes.

1. Make some changes to the layout file. Perhaps only by adding som text to the footer and header or do some larger changes based on your need to try out things.

1. Remember that the layout page has the structure fo the "whole web page". You can adapt it by modifying it, or you can create a completely new layout for the whole website by just changing this file.



Navbar
----------------------------

1. Find the view file that generates the navbar. You can find it by looking in the layout file.

1. Add a new item to the navbar, call it `"New"   => "new.php",`. See that its visible in the web page. Click it to verify you get a 404 (page not found).

1. If you want to study more on this then you can look in the example `example/php/style-active-navbar-item` and review the article that is linked in the example.



Add new pagecontroller
----------------------------

1. Add a new pagecontroller `public/new.php` and add some content into if. Feel free to play around with its content. It is just so that you are aware on how to create a new pagecontroller.

1. Check that the new pagecontroller is clickable in the navbar.

1. You can use this pagecontroller as a way to try out and test various page constructs during the exercise, so just leave it for now.



Page "Home"
----------------------------

1. Replace the text with your own version. You are free to express you as you wish. Get the content from an external file in the `content/` directory.

1. Add something relevant at the aside.



Page "Report"
----------------------------

1. Take your report text from the first kmom and add it to the "Report" page below the right heading. Write it in Markdown (or HTML).

1. Roughly read the documentation on the [Markdown parser](https://github.com/erusev/parsedown) and find the code section that parses the text as Markdown to HTML.

1. (OPTIONAL, HARDER TO SOLVE) The page "About" has content in its sidebar. Add a sidebar to the page "Report" that links internally to the different headings (Report from...) in the page. This requires that you change the Markdown parser, as explained in the issue "[Bygg webbplats och l√§nka till rubrik i Markdown](https://github.com/dbwebb-se/webtec/issues/9)".



Page "About"
----------------------------

1. Add content to this page. Reuse the content from your "About" in `me/report`.

Feel free to express yourself.



Page "Server"
----------------------------

Use the `$_SERVER` and print the following at the top of the page.

1. The details on the referring page, the page visited before this page.

1. The details on the users browser.

1. The details on your web servers version.

1. The details on the request uri.

1. The number of entries (rows/keys) in the array.

Read more on [`$_SERVER` in the manual](https://www.php.net/manual/en/reserved.variables.server.php).



View "measure.php"
----------------------------

The view `view/measure.php` is visible at the bottom of the page "About".

1. Make it also visible on the page "Home" and "Report"

1. Update the view and format its output.

    1. Show the load time in milliseconds (ms) and round to three decimals.

    1. Show the memory used on kilobytes (KB).



View "figure.php"
----------------------------

1. Create a new view `view/figure.php` that helps you add an image `public/img/leaf_256x256.php`, wrapped in a figure element, onto the sidebar of the "About" page.



HTML forms
----------------------------

You can see examples on form elements in the example `example/html/form-element`.

You can see an example on using form elements in the example `example/html/form`.



Page "Form GET"
----------------------------

You can see examples on form elements in the example `example/html/form-element`.

1. Add a select option to the form and see how it works.

1. Add an password field to the form and see how it works.

1. Add an checkbox (or two) to the form and see how it works.

Read more on [`$_GET` in the manual](https://www.php.net/manual/en/reserved.variables.get.php).



Page "Form POST"
----------------------------

1. Do the same updates as in the GET form.

1. In the resultpage, print out details, in a reader friendly way.

Read more on [`$_POST` in the manual](https://www.php.net/manual/en/reserved.variables.post.php).



Page "Cookie"
----------------------------

1. Investigate the example and follow the flow:
    1. The pagecontroller `cookie.php` shows the first page.
    1. Submit the form, it is submitted to a processing pagecontroller `cookie-process.php` that is responsible for extracting the form data and update/set the cookie.
    1. The processing page redirects to a resultpage `cookie.php` that shows the "result".

1. Add a checkbox to the form. The checkbox should be checked when the cookie is active (have a value) and it should be unchecked when the cookie does not have a value. Make it readonly so the user can not change its state.

1. Try to answer the question "Why is it important with a processing page"? You may read about it here "[Processingsida och vidare dirigering](https://dbwebb.se/guide/kom-igang-med-programmering-i-php/processingsida-och-vidare-dirigering)".

Read more on [`$_COOKIE` in the manual](https://www.php.net/manual/en/reserved.variables.cookies.php).



Page "Session"
----------------------------

1. Create a histogram for the dices rolled and show it together with the statistics on the dice rolls.

A histogram shows how many times the dice has rolled 1, 2, 3, 4, 5 and 6 eyes. A simple histogram could look like this for a serie of rolls 1, 1, 2, 3, 5, 6, 6, 6.

1. `**`
2. `*`
3. `*`
4. 
5. `*`
6. `***`

You can create the histogram as you wish. Use plain figures, some text graphic, use form elements for graphic or even more advanced. It is fine to make the plain and simple choice, it is just a matter of the visualisation.

Read more on [`$_SESSION` in the manual](https://www.php.net/manual/en/reserved.variables.session.php).



Run the validation tools
----------------------------

Run the test suite to see if you are clean. if you get errors, see if you can fix them or just silently ignore them for another day.

```
composer test
```

You can also try to execute the following validators, they are a bit tougher and we will not try to correct their findings, if any. Not today at least. Another day.

```
composer psalm
composer phpstan
```
